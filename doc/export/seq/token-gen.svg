<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1193px" preserveAspectRatio="none" style="width:1484px;height:1193px;background:#FFFFFF;" version="1.1" viewBox="0 0 1484 1193" width="1484px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="145.8241" style="stroke:#696969;stroke-width:1.0;" width="10" x="49" y="434.49"/><rect fill="#FFFFFF" height="150.5301" style="stroke:#696969;stroke-width:1.0;" width="10" x="333" y="94.0679"/><rect fill="#FFFFFF" height="145.8241" style="stroke:#696969;stroke-width:1.0;" width="10" x="333" y="434.49"/><rect fill="#FFFFFF" height="151.806" style="stroke:#696969;stroke-width:1.0;" width="10" x="333" y="645.7261"/><rect fill="#FFFFFF" height="271.6481" style="stroke:#696969;stroke-width:1.0;" width="10" x="492" y="829.2381"/><rect fill="#FFFFFF" height="208.2361" style="stroke:#696969;stroke-width:1.0;" width="10" x="497" y="892.6501"/><rect fill="#FFFFFF" height="118.118" style="stroke:#696969;stroke-width:1.0;" width="10" x="502" y="982.7681"/><rect fill="#FFFFFF" height="31.706" style="stroke:#696969;stroke-width:1.0;" width="10" x="1022" y="212.892"/><rect fill="#FFFFFF" height="573.9842" style="stroke:#696969;stroke-width:1.0;" width="10" x="1022" y="510.902"/><rect fill="#FFFFFF" height="37.706" style="stroke:#696969;stroke-width:1.0;" width="10" x="1027" y="542.608"/><rect fill="#FFFFFF" height="31.706" style="stroke:#696969;stroke-width:1.0;" width="10" x="1027" y="1053.1802"/><rect fill="#FFFFFF" height="31.706" style="stroke:#696969;stroke-width:1.0;" width="10" x="1344.5" y="244.598"/><rect fill="#DDF2EB" height="112.4799" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="455" x="958.5" y="291.304"/><rect fill="#BC9CB0" height="490.5721" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="1467.5" x="10" y="602.314"/><path d="M10,653.7261 L1477.5,653.7261 L1477.5,730.62 A3.5,3.5 0 0 1 1474,734.12 L13.5,734.12 A3.5,3.5 0 0 1 10,730.62 L10,653.7261 " fill="#D3CDD7" style="stroke:none;stroke-width:1.0;"/><path d="M10,734.12 L1477.5,734.12 L1477.5,1089.3862 A3.5,3.5 0 0 1 1474,1092.8862 L13.5,1092.8862 A3.5,3.5 0 0 1 10,1089.3862 L10,734.12 " fill="#DDF2EB" style="stroke:none;stroke-width:1.0;"/><rect height="83.118" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;fill:none;" width="1393.5" x="20" y="939.3561"/><line style="stroke:#696969;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="54" x2="54" y1="84.0679" y2="1109.8862"/><line style="stroke:#696969;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="338" x2="338" y1="84.0679" y2="1109.8862"/><line style="stroke:#696969;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="497" x2="497" y1="84.0679" y2="1109.8862"/><line style="stroke:#696969;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1026.5" x2="1026.5" y1="84.0679" y2="1109.8862"/><line style="stroke:#696969;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1194.5" x2="1194.5" y1="351.544" y2="1109.8862"/><line style="stroke:#696969;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1349.5" x2="1349.5" y1="84.0679" y2="1109.8862"/><line style="stroke:#696969;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1440.5" x2="1440.5" y1="84.0679" y2="1109.8862"/><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="30" y="79.9659">Visitor</text><ellipse cx="54" cy="13.5" fill="#454645" rx="8" ry="8" style="stroke:#454645;stroke-width:0.5;"/><path d="M54,21.5 L54,48.5 M41,29.5 L67,29.5 M54,48.5 L41,63.5 M54,48.5 L67,63.5 " fill="none" style="stroke:#454645;stroke-width:0.5;"/><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="30" y="1123.8521">Visitor</text><ellipse cx="54" cy="1136.4541" fill="#454645" rx="8" ry="8" style="stroke:#454645;stroke-width:0.5;"/><path d="M54,1144.4541 L54,1171.4541 M41,1152.4541 L67,1152.4541 M54,1171.4541 L41,1186.4541 M54,1171.4541 L67,1186.4541 " fill="none" style="stroke:#454645;stroke-width:0.5;"/><rect fill="#FF6347" height="52.1358" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="152" x="262" y="30.9321"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="41" x="317.5" y="52.898">«IHM»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="269" y="71.9659">ForgotPasswordView</text><rect fill="#FF6347" height="52.1358" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="152" x="262" y="1108.8862"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="41" x="317.5" y="1130.8521">«IHM»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="269" y="1149.92">ForgotPasswordView</text><rect fill="#FF6347" height="52.1358" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="146" x="424" y="30.9321"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="41" x="476.5" y="52.898">«IHM»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="431" y="71.9659">ResetPasswordView</text><rect fill="#FF6347" height="52.1358" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="146" x="424" y="1108.8862"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="41" x="476.5" y="1130.8521">«IHM»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="431" y="1149.92">ResetPasswordView</text><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="968.5" y="79.9659">:TokenController</text><ellipse cx="1027" cy="49" fill="#FFE552" rx="12" ry="12" style="stroke:#454645;stroke-width:0.5;"/><polygon fill="#454645" points="1023,37,1029,32,1027,37,1029,42,1023,37" style="stroke:#454645;stroke-width:1.0;"/><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="968.5" y="1123.8521">:TokenController</text><ellipse cx="1027" cy="1143.9541" fill="#FFE552" rx="12" ry="12" style="stroke:#454645;stroke-width:0.5;"/><polygon fill="#454645" points="1023,1131.9541,1029,1126.9541,1027,1131.9541,1029,1136.9541,1023,1131.9541" style="stroke:#454645;stroke-width:1.0;"/><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="1165.5" y="1123.8521">t :Token</text><ellipse cx="1195" cy="1143.9541" fill="#FFE552" rx="12" ry="12" style="stroke:#454645;stroke-width:0.5;"/><line style="stroke:#454645;stroke-width:0.5;" x1="1183" x2="1207" y1="1157.9541" y2="1157.9541"/><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1295.5" y="79.9659">:UserController</text><ellipse cx="1349.5" cy="49" fill="#FFE552" rx="12" ry="12" style="stroke:#454645;stroke-width:0.5;"/><polygon fill="#454645" points="1345.5,37,1351.5,32,1349.5,37,1351.5,42,1345.5,37" style="stroke:#454645;stroke-width:1.0;"/><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1295.5" y="1123.8521">:UserController</text><ellipse cx="1349.5" cy="1143.9541" fill="#FFE552" rx="12" ry="12" style="stroke:#454645;stroke-width:0.5;"/><polygon fill="#454645" points="1345.5,1131.9541,1351.5,1126.9541,1349.5,1131.9541,1351.5,1136.9541,1345.5,1131.9541" style="stroke:#454645;stroke-width:1.0;"/><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="1413.5" y="79.9659">u :User</text><ellipse cx="1440.5" cy="49" fill="#FFE552" rx="12" ry="12" style="stroke:#454645;stroke-width:0.5;"/><line style="stroke:#454645;stroke-width:0.5;" x1="1428.5" x2="1452.5" y1="63" y2="63"/><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="1413.5" y="1123.8521">u :User</text><ellipse cx="1440.5" cy="1143.9541" fill="#FFE552" rx="12" ry="12" style="stroke:#454645;stroke-width:0.5;"/><line style="stroke:#454645;stroke-width:0.5;" x1="1428.5" x2="1452.5" y1="1157.9541" y2="1157.9541"/><rect fill="#FFFFFF" height="145.8241" style="stroke:#696969;stroke-width:1.0;" width="10" x="49" y="434.49"/><rect fill="#FFFFFF" height="150.5301" style="stroke:#696969;stroke-width:1.0;" width="10" x="333" y="94.0679"/><rect fill="#FFFFFF" height="145.8241" style="stroke:#696969;stroke-width:1.0;" width="10" x="333" y="434.49"/><rect fill="#FFFFFF" height="151.806" style="stroke:#696969;stroke-width:1.0;" width="10" x="333" y="645.7261"/><rect fill="#FFFFFF" height="271.6481" style="stroke:#696969;stroke-width:1.0;" width="10" x="492" y="829.2381"/><rect fill="#FFFFFF" height="208.2361" style="stroke:#696969;stroke-width:1.0;" width="10" x="497" y="892.6501"/><rect fill="#FFFFFF" height="118.118" style="stroke:#696969;stroke-width:1.0;" width="10" x="502" y="982.7681"/><rect fill="#FFFFFF" height="31.706" style="stroke:#696969;stroke-width:1.0;" width="10" x="1022" y="212.892"/><rect fill="#FFFFFF" height="573.9842" style="stroke:#696969;stroke-width:1.0;" width="10" x="1022" y="510.902"/><rect fill="#FFFFFF" height="37.706" style="stroke:#696969;stroke-width:1.0;" width="10" x="1027" y="542.608"/><rect fill="#FFFFFF" height="31.706" style="stroke:#696969;stroke-width:1.0;" width="10" x="1027" y="1053.1802"/><rect fill="#FFFFFF" height="31.706" style="stroke:#696969;stroke-width:1.0;" width="10" x="1344.5" y="244.598"/><polygon fill="#454645" points="321,113.7739,331,117.7739,321,121.7739,325,117.7739" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="54" x2="327" y1="117.7739" y2="117.7739"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="61" y="111.9649">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="72" y="111.9649">Click the "Forgot password?" button</text><polygon fill="#454645" points="354,145.4799,344,149.4799,354,153.4799,350,149.4799" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="348" x2="1026" y1="149.4799" y2="149.4799"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="360" y="143.6709">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="371" y="143.6709">Enter your username</text><polygon fill="#454645" points="321,177.186,331,181.186,321,185.186,325,181.186" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="54" x2="327" y1="181.186" y2="181.186"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="61" y="175.377">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="72" y="175.377">Provide username</text><polygon fill="#454645" points="1010,208.892,1020,212.892,1010,216.892,1014,212.892" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="343" x2="1016" y1="212.892" y2="212.892"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="350" y="207.083">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="361" y="207.083">Search for the user in the database</text><polygon fill="#454645" points="349,240.598,339,244.598,349,248.598,345,244.598" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="343" x2="1026" y1="244.598" y2="244.598"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="355" y="238.789">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="644" x="366" y="238.789">If the username exists, you will have received a token in your mail which you can use to reset your password.</text><polygon fill="#454645" points="1337.5,272.304,1347.5,276.304,1337.5,280.304,1341.5,276.304" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1027" x2="1343.5" y1="276.304" y2="276.304"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1034" y="270.495">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1045" y="270.495">fetchOne(User)</text><path d="M962,291.304 L1025.5,291.304 L1025.5,301.01 L1015.5,311.01 L958.5,311.01 L958.5,294.804 A3.5,3.5 0 0 1 962,291.304 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="112.4799" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="455" x="958.5" y="291.304"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="973.5" y="306.201">opt</text><a href="If" target="_top" title="If" xlink:actuate="onRequest" xlink:href="If" xlink:show="new" xlink:title="If" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="58" x="1040.5" y="305.0629">user exists</text></a><polygon fill="#454645" points="1235.5,330.716,1225.5,334.716,1235.5,338.716,1231.5,334.716" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1229.5" x2="1348.5" y1="334.716" y2="334.716"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1241.5" y="328.907">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="1252.5" y="328.907">generate(User)</text><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="1165.5" y="357.976">t :Token</text><ellipse cx="1195" cy="327.01" fill="#FFE552" rx="12" ry="12" style="stroke:#454645;stroke-width:0.5;"/><line style="stroke:#454645;stroke-width:0.5;" x1="1183" x2="1207" y1="341.01" y2="341.01"/><polygon fill="#454645" points="1038,391.784,1028,395.784,1038,399.784,1034,395.784" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1032" x2="1348.5" y1="395.784" y2="395.784"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1044" y="389.975">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="1055" y="389.975">sendMail()</text><polygon fill="#454645" points="354,430.49,344,434.49,354,438.49,350,434.49" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="348" x2="1026" y1="434.49" y2="434.49"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="360" y="428.681">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="371" y="428.681">Token generated</text><line style="stroke:#454645;stroke-width:1.0;" x1="59" x2="101" y1="466.196" y2="466.196"/><line style="stroke:#454645;stroke-width:1.0;" x1="101" x2="101" y1="466.196" y2="479.196"/><line style="stroke:#454645;stroke-width:1.0;" x1="60" x2="101" y1="479.196" y2="479.196"/><polygon fill="#454645" points="70,475.196,60,479.196,70,483.196,66,479.196" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="66" y="460.387">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242" x="84" y="460.387">Search through emails for security token</text><polygon fill="#454645" points="321,506.902,331,510.902,321,514.902,325,510.902" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="59" x2="327" y1="510.902" y2="510.902"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="66" y="505.093">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="84" y="505.093">Input security token</text><polygon fill="#454645" points="1015,538.608,1025,542.608,1015,546.608,1019,542.608" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="343" x2="1021" y1="542.608" y2="542.608"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="350" y="536.799">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="368" y="536.799">Search for the token in the database</text><line style="stroke:#454645;stroke-width:1.0;" x1="1037" x2="1079" y1="579.314" y2="579.314"/><line style="stroke:#454645;stroke-width:1.0;" x1="1079" x2="1079" y1="579.314" y2="592.314"/><line style="stroke:#454645;stroke-width:1.0;" x1="1032" x2="1079" y1="592.314" y2="592.314"/><polygon fill="#454645" points="1042,588.314,1032,592.314,1042,596.314,1038,592.314" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1044" y="573.505">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1062" y="573.505">searchToken(Token)</text><path d="M13.5,602.314 L73,602.314 L73,612.0201 L63,622.0201 L10,622.0201 L10,605.814 A3.5,3.5 0 0 1 13.5,602.314 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="490.5721" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="1467.5" x="10" y="602.314"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="25" y="617.2111">alt</text><a href="If" target="_top" title="If" xlink:actuate="onRequest" xlink:href="If" xlink:show="new" xlink:title="If" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="72" x="88" y="616.073">token invalid</text></a><polygon fill="#454645" points="354,641.7261,344,645.7261,354,649.7261,350,645.7261" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="348" x2="1021" y1="645.7261" y2="645.7261"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="360" y="639.9171">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="378" y="639.9171">Token is invalid</text><line style="stroke:#696969;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1477.5" y1="654.7261" y2="654.7261"/><a href="If" target="_top" title="If" xlink:actuate="onRequest" xlink:href="If" xlink:show="new" xlink:title="If" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="78" x="15" y="666.485">token expired</text></a><polygon fill="#454645" points="354,690.414,344,694.414,354,698.414,350,694.414" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="348" x2="1021" y1="694.414" y2="694.414"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="360" y="688.605">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="378" y="688.605">Token is expired</text><polygon fill="#454645" points="1183,722.12,1193,726.12,1183,730.12,1187,726.12" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1032" x2="1189" y1="726.12" y2="726.12"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1039" y="720.311">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1057" y="720.311">remove(Token)</text><line style="stroke:#696969;stroke-width:2.0;" x1="1186" x2="1204" y1="717.12" y2="735.12"/><line style="stroke:#696969;stroke-width:2.0;" x1="1186" x2="1204" y1="735.12" y2="717.12"/><line style="stroke:#696969;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1477.5" y1="735.12" y2="735.12"/><polygon fill="#454645" points="1183,758.826,1193,762.826,1183,766.826,1187,762.826" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1032" x2="1189" y1="762.826" y2="762.826"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1039" y="757.017">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="1057" y="757.017">consume(Token)</text><path d="M1200,744.62 L1200,764.62 A3.5,3.5 0 0 0 1203.5,768.12 L1454.5,768.12 A3.5,3.5 0 0 0 1458,764.62 L1458,751.12 L1448,741.12 L1203.5,741.12 A3.5,3.5 0 0 0 1200,744.62 " fill="#7FFFD4" style="stroke:#181818;stroke-width:1.5;"/><path d="M1448,741.12 L1448,749.37 A1.75,1.75 0 0 0 1449.75,751.12 L1458,751.12 L1448,741.12 " fill="#7FFFD4" style="stroke:#181818;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="1206" y="760.017">Consumed tokens are no longer usable.</text><line style="stroke:#696969;stroke-width:2.0;" x1="1186" x2="1204" y1="753.826" y2="771.826"/><line style="stroke:#696969;stroke-width:2.0;" x1="1186" x2="1204" y1="771.826" y2="753.826"/><polygon fill="#454645" points="349,793.532,339,797.532,349,801.532,345,797.532" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="343" x2="1021" y1="797.532" y2="797.532"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="355" y="791.723">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="373" y="791.723">Token is valid</text><polygon fill="#454645" points="513,825.2381,503,829.2381,513,833.2381,509,829.2381" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507" x2="1021" y1="829.2381" y2="829.2381"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="519" y="823.429">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="537" y="823.429">Enter your new password</text><polygon fill="#454645" points="480,856.9441,490,860.9441,480,864.9441,484,860.9441" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="54" x2="486" y1="860.9441" y2="860.9441"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="61" y="855.1351">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="79" y="855.1351">Provide password</text><polygon fill="#454645" points="518,888.6501,508,892.6501,518,896.6501,514,892.6501" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="512" x2="1021" y1="892.6501" y2="892.6501"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="524" y="886.8411">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="542" y="886.8411">Confirm your new password</text><polygon fill="#454645" points="485,920.3561,495,924.3561,485,928.3561,489,924.3561" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="54" x2="491" y1="924.3561" y2="924.3561"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="61" y="918.5471">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="79" y="918.5471">Confirm password</text><path d="M23.5,939.3561 L93,939.3561 L93,949.0621 L83,959.0621 L20,959.0621 L20,942.8561 A3.5,3.5 0 0 1 23.5,939.3561 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="83.118" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="1393.5" x="20" y="939.3561"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="35" y="954.2531">loop</text><a href="while" target="_top" title="while" xlink:actuate="onRequest" xlink:href="while" xlink:show="new" xlink:title="while" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="191" x="108" y="953.115">password != confirmationPassword</text></a><polygon fill="#454645" points="523,978.7681,513,982.7681,523,986.7681,519,982.7681" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="517" x2="1348.5" y1="982.7681" y2="982.7681"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="529" y="976.9591">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284" x="547" y="976.9591">The provided passwords don't match, try again.</text><polygon fill="#454645" points="490,1010.4742,500,1014.4742,490,1018.4742,494,1014.4742" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="54" x2="496" y1="1014.4742" y2="1014.4742"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="61" y="1008.6651">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="79" y="1008.6651">Input password</text><polygon fill="#454645" points="1015,1049.1802,1025,1053.1802,1015,1057.1802,1019,1053.1802" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="512" x2="1021" y1="1053.1802" y2="1053.1802"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="519" y="1047.3712">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="537" y="1047.3712">Reset the user's password</text><polygon fill="#454645" points="1428.5,1080.8862,1438.5,1084.8862,1428.5,1088.8862,1432.5,1084.8862" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1032" x2="1434.5" y1="1084.8862" y2="1084.8862"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1039" y="1079.0772">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240" x="1057" y="1079.0772">Update user credentials — update(User)</text><!--MD5=[333b9cfbbdbab8de660b8886116b5f0c]
@startuml
!theme vibrant

actor Visitor as V
participant "ForgotPasswordView" as IHMFP << IHM >>
participant "ResetPasswordView" as IHMRP << IHM >>
control ":TokenController" as TCtrl
entity "t :Token" as Token
control ":UserController" as UCtrl
entity "u :User" as User

autonumber

activate IHMFP
V -> IHMFP: Click the "Forgot password?" button
TCtrl - -> IHMFP: Enter your username
V -> IHMFP: Provide username
IHMFP -> TCtrl ++: Search for the user in the database
TCtrl - -> IHMFP - -: If the username exists, you will have received a token in your mail which you can use to reset your password.
deactivate IHMFP

activate UCtrl
TCtrl -> UCtrl: fetchOne(User)
deactivate UCtrl

opt #DDF2EB [If user exists]
   UCtrl -> Token **: generate(User)
   UCtrl -> TCtrl: sendMail()
end

TCtrl - -> IHMFP - -: Token generated
deactivate TCtrl

activate IHMFP
activate V
V -> V: Search through emails for security token
V -> IHMFP: Input security token
activate TCtrl
IHMFP -> TCtrl++: Search for the token in the database
TCtrl -> TCtrl- -: searchToken(Token)
deactivate IHMFP
deactivate V

alt #BC9CB0 [If token invalid]
   TCtrl - -> IHMFP ++: Token is invalid
else #D3CDD7 [If token expired]
   TCtrl - -> IHMFP: Token is expired
   TCtrl -> Token !!: remove(Token)
else #DDF2EB
   TCtrl -> Token !!: consume(Token)
   note right 
      Consumed tokens are no longer usable.
   end note
   TCtrl - -> IHMFP: Token is valid

   deactivate IHMFP

   TCtrl - -> IHMRP ++: Enter your new password
   V -> IHMRP - -: Provide password

   TCtrl - -> IHMRP ++: Confirm your new password
   V -> IHMRP - -: Confirm password

   loop [while password != confirmationPassword] 
      UCtrl - -> IHMRP ++: The provided passwords don't match, try again.
      V -> IHMRP - -: Input password
   end

   IHMRP -> TCtrl ++: Reset the user's password
   TCtrl -> User - -: Update user credentials — update(User)

end
@enduml

@startuml
skinparam BackgroundColor FFFFFF
skinparam shadowing false
skinparam RoundCorner 7
skinparam ArrowColor 454645
skinparam FontColor 454645
skinparam SequenceLifeLineBorderColor 696969
skinparam SequenceGroupHeaderFontColor 454645
skinparam SequenceGroupFontColor 696969
skinparam SequenceGroupBorderColor 696969
skinparam SequenceGroupBorderThickness 1

skinparam sequenceDivider {
    BorderColor 454645
    BorderThickness 1
    FontColor 454645
}

skinparam participant {
    BackgroundColor FF6347
    BorderColor 454645
    FontColor FFFFFF
    BorderThickness 1.5
}

skinparam database {
    BackgroundColor 00FFFF
    BorderColor 454645
    FontColor 454645
}

skinparam entity {
    BackgroundColor FFE552
    BorderColor 454645
    FontColor 454645
}

skinparam note {
    BackgroundColor 7FFFD4
    BorderColor 454645
    FontColor 454645
    BorderThickness 1.5
}

skinparam actor {
    BackgroundColor 454645
    BorderColor 454645
    FontColor 454645
}

skinparam boundary {
    BackgroundColor FFE552
    BorderColor 454645
    FontColor 454645
}

skinparam control {
    BackgroundColor FFE552
    BorderColor 454645
    FontColor 454645
}

skinparam collections {
    BackgroundColor FF5F42
    BorderColor 454645
    FontColor 454645
}

skinparam queue {
    BackgroundColor FF6347
    BorderColor 454645
    FontColor FFF
    BorderThickness 1.5
}

actor Visitor as V
participant "ForgotPasswordView" as IHMFP << IHM >>
participant "ResetPasswordView" as IHMRP << IHM >>
control ":TokenController" as TCtrl
entity "t :Token" as Token
control ":UserController" as UCtrl
entity "u :User" as User

autonumber

activate IHMFP
V -> IHMFP: Click the "Forgot password?" button
TCtrl - -> IHMFP: Enter your username
V -> IHMFP: Provide username
IHMFP -> TCtrl ++: Search for the user in the database
TCtrl - -> IHMFP - -: If the username exists, you will have received a token in your mail which you can use to reset your password.
deactivate IHMFP

activate UCtrl
TCtrl -> UCtrl: fetchOne(User)
deactivate UCtrl

opt #DDF2EB [If user exists]
   UCtrl -> Token **: generate(User)
   UCtrl -> TCtrl: sendMail()
end

TCtrl - -> IHMFP - -: Token generated
deactivate TCtrl

activate IHMFP
activate V
V -> V: Search through emails for security token
V -> IHMFP: Input security token
activate TCtrl
IHMFP -> TCtrl++: Search for the token in the database
TCtrl -> TCtrl- -: searchToken(Token)
deactivate IHMFP
deactivate V

alt #BC9CB0 [If token invalid]
   TCtrl - -> IHMFP ++: Token is invalid
else #D3CDD7 [If token expired]
   TCtrl - -> IHMFP: Token is expired
   TCtrl -> Token !!: remove(Token)
else #DDF2EB
   TCtrl -> Token !!: consume(Token)
   note right 
      Consumed tokens are no longer usable.
   end note
   TCtrl - -> IHMFP: Token is valid

   deactivate IHMFP

   TCtrl - -> IHMRP ++: Enter your new password
   V -> IHMRP - -: Provide password

   TCtrl - -> IHMRP ++: Confirm your new password
   V -> IHMRP - -: Confirm password

   loop [while password != confirmationPassword] 
      UCtrl - -> IHMRP ++: The provided passwords don't match, try again.
      V -> IHMRP - -: Input password
   end

   IHMRP -> TCtrl ++: Reset the user's password
   TCtrl -> User - -: Update user credentials — update(User)

end
@enduml

PlantUML version 1.2022.4(Sat Apr 09 14:29:17 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>